(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{291:function(e,t,a){e.exports=a(502)},498:function(e,t){},502:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(47),c=a.n(o),l=a(20),s=a(57),i=a(256),u=a(22),p=a(84),m=a(77),h=a.n(m),d=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:!1},t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(sessionStorage.getItem("user"));if(a)return a;switch(t.type){case"LOGOUT":return{username:!1};case"LOGIN_USER":case"REGISTER_USER":return t.payload;default:return e}},channels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return[];case"LOAD_USER_CHANNELS":case"CREATE_CHANNEL":return t.payload;default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":case"SWITCH_TAB":case"SWITCH_CHANNEL":return[];case"NEW_POST":return[].concat(Object(p.a)(e),[t.payload]);case"LOAD_USER_POSTS":return[].concat(Object(p.a)(t.payload),Object(p.a)(e));default:return e}},invites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return[];case"LOAD_USER_INVITES":return t.payload;default:return e}},top5:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOGOUT":return{};case"FETCH_TOP5":return h.a.assign(e,Object(u.a)({},n.entity,n.data));default:return e}},activeTab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"POSTS",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return"POSTS";case"SWITCH_TAB":return t.payload;default:return e}},activeChannel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_id:!1},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOGOUT":return{_id:!1};case"LOAD_USER_CHANNELS":case"CREATE_CHANNEL":return n.length<1?e:n[0];case"SWITCH_CHANNEL":return n;default:return e}}}),g=a(14),f=a(15),v=a(16),b=a(17),E=a(60),O=a(25),C=a(66),y=a(519),j=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(b.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C.a,{to:"/login"},r.a.createElement(y.a,{color:"blue"},"Login")),r.a.createElement(C.a,{to:"/register"},r.a.createElement(y.a,{color:"green"},"Sign Up")))}}]),t}(r.a.Component),w=a(513),S=a(19),T=a.n(S),I=a(29),_=a(261),k=a.n(_),x=window.location.protocol+"//"+window.location.hostname+":3001",A="localhost"===window.location.hostname?x:"https://kb512-team-up-api.herokuapp.com",L=k.a.create({baseURL:A}),N=function(e){return function(){var t=Object(I.a)(T.a.mark((function t(a){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.get("/channels",{params:{username:e}});case 2:n=t.sent.data,a({type:"LOAD_USER_CHANNELS",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},U=function(e,t){return function(){var a=Object(I.a)(T.a.mark((function a(n){var r;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=t.$gte||t.$lte?JSON.stringify({created:t}):{},a.next=3,L.get("/top5",{params:{entity:e,filter:t}});case 3:r=a.sent.data,n({type:"FETCH_TOP5",payload:{entity:e,data:r}});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},P=function(){var e=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.post("/invitations",t);case 2:return a=e.sent.data,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=(0,a(38).createBrowserHistory)(),R=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:"",error:{username:!1,password:!1}},a.validate=function(e){var t={username:!1,password:!1};return e.username||(t.username="Enter the username"),e.password||(t.password="Enter the password"),a.setState({error:t}),!t.username&&!t.password},a.onSubmit=function(){var e={username:a.state.username,password:a.state.password};a.validate(e)&&a.props.loginUser(e)},a.handleChange=function(e,t){return a.setState(Object(u.a)({},t.name,t.value))},a.render=function(){return r.a.createElement(w.a,null,r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Input,{label:"Username",placeholder:"Username",name:"username",autoComplete:"off",onChange:a.handleChange,error:a.state.error.username?a.state.error.username:void 0})),r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Input,{label:"Password",placeholder:"Password",type:"password",name:"password",autoComplete:"off",onChange:a.handleChange,error:a.state.error.password?a.state.error.password:void 0})),r.a.createElement("br",null),r.a.createElement(w.a.Button,{onClick:a.onSubmit,color:"blue"},"Login"))},a}return Object(b.a)(t,e),t}(r.a.Component),H=Object(l.b)((function(e){var t=e.user;return t.username&&(sessionStorage.setItem("user",JSON.stringify(t)),D.push("/user")),t.msg&&alert(t.msg),t}),{loginUser:function(e){return function(){var t=Object(I.a)(T.a.mark((function t(a){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.get("/login",{params:e});case 2:n=t.sent,a({type:"LOGIN_USER",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(R),G=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={email:"",region:"",username:"",password:"",requestSent:!1,error:{email:!1,region:!1,username:!1,password:!1}},a.handleChange=function(e,t){var n=t.name,r=t.value;return a.setState(Object(u.a)({},n,r))},a.emailValidator=function(e){return!(""===e||!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e))},a.passValidator=function(e){return!(""===e||!/[a-zA-Z0-9._@]{8,}/.test(e))},a.regionValidator=function(e){return!(""===e||!/^[a-zA-Z]{2,}$/.test(e))},a.usernameValidator=function(e){return!(""===e||!/^[a-z0-9_-]{3,}$/.test(e))},a.validate=function(e){var t={email:!1,region:!1,username:!1,password:!1};return a.usernameValidator(e.username)||(t.username="Enter a valid username ( only '-' , '_' , a-z , A-z , 0-9 are allowed. Min Length = 3 )  "),a.regionValidator(e.region)||(t.region="Enter a valid region"),a.emailValidator(e.email)||(t.email="Please enter a valid email address"),a.passValidator(e.password)||(t.password="Invalid Password Format ( only '.' , '@' , '_' , a-z , A-z , 0-9 are allowed. Min Length = 8 )"),a.setState({error:t,requestSent:!1}),!(t.email||t.region||t.username||t.password)},a.onSubmit=function(){a.setState({requestSent:!0});var e={email:a.state.email,region:a.state.region,username:a.state.username,password:a.state.password};a.validate(e)&&a.props.registerUser(e)},a.render=function(){return r.a.createElement(w.a,null,r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Input,{label:"Email",placeholder:"Email",name:"email",onChange:a.handleChange,error:a.state.error.email?{content:a.state.error.email,pointing:"below"}:void 0})),r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Input,{label:"Region",placeholder:"Region",name:"region",onChange:a.handleChange,error:a.state.error.region?{content:a.state.error.region,pointing:"below"}:void 0})),r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Input,{label:"Username",placeholder:"Username",name:"username",onChange:a.handleChange,error:a.state.error.username?{content:a.state.error.username,pointing:"below"}:void 0})),r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Input,{label:"Password",placeholder:"Password",name:"password",onChange:a.handleChange,error:a.state.error.password?{content:a.state.error.password,pointing:"below"}:void 0})),r.a.createElement("br",null),a.state.requestSent?r.a.createElement(y.a,{loading:!0,primary:!0},"Loading"):r.a.createElement(y.a,{color:"green",onClick:a.onSubmit},"Register"))},a}return Object(b.a)(t,e),t}(r.a.Component),M=Object(l.b)((function(e){var t=e.user;return t.username&&(sessionStorage.setItem("user",JSON.stringify(t)),D.push("/user")),t.msg&&alert(t.msg),t}),{registerUser:function(e){return function(){var t=Object(I.a)(T.a.mark((function t(a){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.post("/register",e);case 2:n=t.sent,a({type:"REGISTER_USER",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(G),z=a(521),B=a(512),V=a(520),$=a(128),Y=a(129),F=a(85),W=a(514),q=a(511),J=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",description:"",tag:"",tags:[],modalOpen:!1,error:{name:!1,description:!1,tag:!1}},a.handleChange=function(e,t){var n=t.name,r=t.value;return a.setState(Object(u.a)({},n,r))},a.handleOpen=function(){return a.setState({modalOpen:!0})},a.handleClose=function(){return a.setState({modalOpen:!1})},a.validate=function(){var e={name:!1,description:!1},t=!0;return a.state.name.length||(e.name="Enter a Channel Name",t=!1),a.state.description.length||(e.description="Enter a Description",t=!1),a.state.tags.length<=0&&(e.tag="Add atleast one tag",t=!1),a.setState({error:e}),t},a.validateTag=function(){var e=Object($.a)({},a.state.error);return a.state.tag.length<=0?(e.tag="Enter a Tag",a.setState({error:e}),!1):a.state.tags.includes(a.state.tag)?(e.tag="Tag already added",a.setState({error:e}),!1):(e.tag=!1,a.setState({error:e}),!0)},a.onSubmitTag=function(){a.validateTag()&&a.setState({tags:[].concat(Object(p.a)(a.state.tags),[a.state.tag])})},a.removeTag=function(e){a.setState({tags:a.state.tags.filter((function(t){return t!==e}))})},a.onSubmit=function(){a.validate()&&(a.props.createChannel({name:a.state.name,description:a.state.description,tags:a.state.tags,username:a.props.username}),a.handleClose())},a.renderTags=function(){return a.state.tags.map((function(e){return r.a.createElement(Y.a,{key:e,color:"orange"},e,r.a.createElement(F.a,{name:"delete",link:!0,onClick:function(){a.removeTag(e)}}))}))},a.render=function(){return r.a.createElement(W.a,{trigger:r.a.createElement(y.a,{onClick:a.handleOpen,icon:!0,primary:!0},r.a.createElement(F.a,{name:"add"})," New Channel"),open:a.state.modalOpen,onClose:a.handleClose,closeIcon:!0},r.a.createElement(W.a.Header,null,"Create a new Channel"),r.a.createElement(W.a.Content,{image:!0},r.a.createElement(w.a,null,r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Input,{label:"Name",placeholder:"Name",name:"name",onChange:a.handleChange,style:{width:"40rem"},error:a.state.error.name?{content:a.state.error.name,pointing:"left"}:void 0})),r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Field,{label:"Description",placeholder:"Description",control:q.a,name:"description",onChange:a.handleChange,style:{width:"40rem",height:"10rem"},error:a.state.error.description?{content:a.state.error.description,pointing:"left"}:void 0})),r.a.createElement(w.a.Group,{inline:!0},r.a.createElement(w.a.Input,{label:"Tag",placeholder:"Tag",name:"tag",onChange:a.handleChange,error:a.state.error.tag?{content:a.state.error.tag,pointing:"left"}:void 0}),r.a.createElement(F.a,{size:"large",color:"green",name:"add",link:!0,onClick:a.onSubmitTag})),r.a.createElement(w.a.Group,null," ",a.renderTags()),r.a.createElement("br",null),r.a.createElement(W.a.Actions,null,r.a.createElement(y.a,{color:"green",onClick:a.onSubmit},"SUBMIT")))))},a}return Object(b.a)(t,e),t}(r.a.Component),Z=Object(l.b)((function(e){return e.user}),{createChannel:function(e){return function(){var t=Object(I.a)(T.a.mark((function t(a){var n,r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.post("/channels",e);case 2:return n=t.sent.data.msg,alert(n),t.next=6,L.get("/channels",{params:{username:e.username}});case 6:r=t.sent.data,a({type:"CREATE_CHANNEL",payload:r});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(J),X=a(516),K=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={channel:{},username:"",modalOpen:!1,requestSent:!1,error:{username:!1,channel:!1}},a.handleChange=function(e,t){var n=t.name,r=t.value;return a.setState(Object(u.a)({},n,"channel"===n?JSON.parse(r):r))},a.openModal=function(){a.props.channels.length<1?alert("No Channel created to Invite anyone"):a.setState({modalOpen:!0})},a.closeModal=function(){return a.setState({modalOpen:!1})},a.validate=function(){a.setState({requestSent:!0});var e={username:!1,channel:!1},t=!0;return a.state.channel._id||(e.channel="Select a Channel",t=!1),a.setState({error:e}),t},a.onSubmit=Object(I.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.validate()){e.next=3;break}return a.setState({requestSent:!1}),e.abrupt("return");case 3:return e.next=5,P({channel_id:a.state.channel._id,channel_name:a.state.channel.name,username:a.state.username,sent_by:a.state.channel.username});case 5:t=e.sent,a.setState({requestSent:!1}),t.err?a.setState({error:{username:t.err,channel:!1}}):(a.closeModal(),alert(t.msg));case 8:case"end":return e.stop()}}),e)}))),a}return Object(b.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(W.a,{trigger:r.a.createElement(y.a,{onClick:this.openModal,icon:!0,primary:!0},r.a.createElement(F.a,{name:"add"})," New Invite"),open:this.state.modalOpen,onClose:this.closeModal,closeIcon:!0},r.a.createElement(W.a.Header,null,"Send an Invite "),r.a.createElement(W.a.Content,{image:!0},r.a.createElement(w.a,null,r.a.createElement(w.a.Group,null,r.a.createElement(X.a,{style:{marginLeft:"2%"},name:"channel",onChange:this.handleChange,placeholder:"Channel",error:Boolean(this.state.error.channel),options:this.props.channels.filter((function(t){return t.username===e.props.user.username})).map((function(e){var t=e._id,a=e.name,n=e.username;return{key:t,text:a,value:JSON.stringify({_id:t,name:a,username:n})}}))})),r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Input,{label:"Username",placeholder:"Username",name:"username",onChange:this.handleChange,style:{width:"40rem"},error:this.state.error.username?{content:this.state.error.username,pointing:"left"}:void 0})),r.a.createElement("br",null),r.a.createElement(W.a.Actions,null,this.state.requestSent?r.a.createElement(y.a,{loading:!0,primary:!0},"Loading"):r.a.createElement(y.a,{color:"blue",onClick:this.onSubmit},"INVITE")))))}}]),t}(n.Component),Q=Object(l.b)((function(e){return{channels:e.channels,user:e.user}}),{loadChannels:N})(K),ee=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={activeItem:"POSTS"},a.handleItemClick=function(e,t){var n=t.name;a.props.switchTab(n),a.setState({activeItem:n})},a}return Object(b.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement(V.a,{style:{position:"relative",height:"6%"},size:"large",pointing:!0},r.a.createElement(V.a.Item,{header:!0},"TEAM-UP"),r.a.createElement(V.a.Item,{name:"POSTS",active:"POSTS"===this.state.activeItem,onClick:this.handleItemClick}),r.a.createElement(V.a.Item,{name:"TOP5",active:"TOP5"===this.state.activeItem,onClick:this.handleItemClick}),r.a.createElement(V.a.Menu,{position:"right"},r.a.createElement(V.a.Item,{name:"INVITES",active:"INVITES"===this.state.activeItem,onClick:this.handleItemClick}),r.a.createElement(V.a.Item,null,r.a.createElement(Z,null)),r.a.createElement(V.a.Item,null,r.a.createElement(Q,null))))}}]),t}(n.Component),te=Object(l.b)(null,{switchTab:function(e){return{type:"SWITCH_TAB",payload:e}}})(ee),ae=a(522),ne=a(523),re=a(281),oe=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={},a.logout=function(){sessionStorage.clear(),a.props.logoutUser()},a}return Object(b.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement(ae.a,{style:{height:"auto"},clearing:!0},r.a.createElement(ne.a,{as:"h2",floated:"left"},r.a.createElement(re.a,{circular:!0,src:"https://react.semantic-ui.com/images/avatar/large/patrick.png"}),this.props.username),r.a.createElement(C.a,{to:"/"},r.a.createElement(y.a,{floated:"right",color:"black",onClick:this.logout},"Logout")))}}]),t}(r.a.Component),ce=Object(l.b)(null,{logoutUser:function(){return{type:"LOGOUT"}}})(oe),le=a(524),se=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={activeItem:""},a.handleItemClick=function(e,t){var n=t.name;a.setState({activeItem:n})},a.componentDidMount=Object(I.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.loadChannels(a.props.user.username);case 2:a.props.channels&&a.props.channels.length&&a.setState({activeItem:a.props.channels[0].name});case 3:case"end":return e.stop()}}),e)}))),a.channelList=function(e){return r.a.createElement(V.a.Item,{name:e.name,key:e._id,active:a.state.activeItem===e.name,onClick:function(t,n){a.handleItemClick(t,n),a.props.switchChannel(e)}})},a.render=function(){return a.props.channels?r.a.createElement(V.a,{text:!0,vertical:!0,stackable:!0},r.a.createElement(V.a.Item,{header:!0},"CHANNELS"),a.props.channels.map((function(e){return a.channelList(e)}))):r.a.createElement(B.a,{active:!0,inline:!0})},a}return Object(b.a)(t,e),t}(r.a.Component),ie=Object(l.b)((function(e){return{user:e.user,channels:e.channels}}),{loadChannels:N,switchChannel:function(e){return{type:"SWITCH_CHANNEL",payload:e}}})(se),ue=a(279),pe=a.n(ue)()(A),me={position:"relative",width:"100%",height:"70%",resize:"none"},he=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={content:"",tags:[],error:!1},a.handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(u.a)({},n,"content"===n?r.replace(/[/^ *$/]{2,}/g," ").replace(/^\s*[\r\n]/gm,""):r))},a.validate=function(){return a.state.content.length<2?(a.setState({error:"Invalid Content"}),!1):(a.setState({error:!1}),!0)},a.onSubmit=function(){a.validate()&&(pe.emit("new_post",{username:a.props.user.username,tags:a.state.tags,content:a.state.content,channel_id:a.props.activeChannel._id}),a.setState({content:"",tags:[],error:!1}))},a}return Object(b.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return this.props.activeChannel._id?r.a.createElement(ae.a,{style:{position:"relative",height:"20%",marginTop:"0",top:"0",bottom:"0",background:"#989898"}},r.a.createElement(X.a,{name:"tags",placeholder:"Tags",style:{position:"relative",marginBottom:"0.3%"},multiple:!0,selection:!0,value:this.state.tags,options:this.props.activeChannel.tags.map((function(e){return{key:e,text:e,value:e}})),onChange:this.handleChange}),r.a.createElement(y.a,{color:"green",floated:"right",onClick:this.onSubmit},"POST"),r.a.createElement("br",null),r.a.createElement(q.a,{name:"content",placeholder:this.state.error?"Enter some text!":"Post Content",style:this.state.error?h.a.assign(me,{border:"4px solid red"}):me,value:this.state.content,onChange:this.handleChange})):r.a.createElement(r.a.Fragment,null,"Loading..")}}]),t}(n.Component),de=Object(l.b)((function(e){return{activeChannel:e.activeChannel,user:e.user}}))(he),ge=a(515),fe=a(67),ve=a.n(fe),be=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={activeChannel:!1},a.componentDidMount=function(){var e=document.getElementById("chatContainer");e.onscroll=function(){0===e.scrollTop&&pe.emit("fetch_old_posts",{channel_id:a.props.activeChannel._id,skip:a.props.posts.length},a.props.loadPosts)},pe.on("new_post_braodcast",(function(t){a.props.updatePosts(t),e.scrollHeight&&(e.scrollTop=e.scrollHeight)}))},a.componentDidUpdate=function(e){var t=document.getElementById("chatContainer"),n=e.posts.length,r=a.props.posts.length;n<r&&(t.scrollTop=n<1?t.scrollHeight:1+t.scrollHeight*(r-n)/r)},a}return Object(b.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement(ae.a,{id:"chatContainer",style:{position:"relative",overflowY:"scroll",scrollBehavior:"smooth",height:"70%",marginBottom:"0",background:"#D0D0D0"}},this.props.posts.map((function(e,t){return Ee(e,t)})))}}]),t}(n.Component);be.getDerivedStateFromProps=function(e,t){return e.activeChannel&&e.activeChannel._id!==t.activeChannel._id?(pe.emit("join_channel_room",e.activeChannel._id,e.loadPosts),{activeChannel:e.activeChannel}):t};var Ee=function(e){return r.a.createElement(ae.a,{style:{wordWrap:"break-word"},key:e._id},r.a.createElement(ge.a.User,null,r.a.createElement("b",{style:{marginRight:"1%",fontSize:"1.1rem"}},e.username)),r.a.createElement("span",{style:{color:"#bfbfbf",fontSize:"0.85rem"}},ve()(e.created,"x").format("h:mm A, D-MMM-YYYY")),r.a.createElement("span",{style:{float:"right"}},e.tags.map((function(e,t){return r.a.createElement(Y.a,{color:"orange",key:t},e)}))),r.a.createElement("br",null),Oe(e.content.split("\n")))},Oe=function(e){var t=[];return e.forEach((function(e,a){t.push(e),t.push(r.a.createElement("br",{key:a}))})),t.pop(),t},Ce=Object(l.b)((function(e){return{activeChannel:e.activeChannel,posts:e.posts,user:e.user}}),{updatePosts:function(e){return{type:"NEW_POST",payload:e}},loadPosts:function(e){return{type:"LOAD_USER_POSTS",payload:e}}})(be),ye=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={},a.render=function(){return r.a.createElement(le.a,{style:{position:"relative",height:"100%"},stackable:!0},r.a.createElement(le.a.Row,{style:{position:"relative",height:"100%",paddingBottom:"0",display:"flex"},stretched:!0},r.a.createElement(le.a.Column,{style:{position:"relative",overflowX:"auto",overflowY:"scroll",width:"auto",height:"100%"}},r.a.createElement(ie,null)),r.a.createElement("br",null),r.a.createElement(le.a.Column,{style:{position:"relative",flexGrow:"100",height:"100%"}},r.a.createElement(Ce,null),r.a.createElement(de,null))))},a}return Object(b.a)(t,e),t}(r.a.Component),je=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={},a.handleChange=function(e,t){var n=t.name,r=t.value,o="$lte"===n?ve()(r).add("1","day").subtract("1","milliseconds").format("x"):ve()(r).format("x");if(""===r)a.updateTop5(h.a.omit(a.state,n)),delete a.state[n],a.setState({});else{if(!a.validate(n,o))return void alert("Invalid Range");a.updateTop5(Object($.a)({},a.state,Object(u.a)({},n,o))),a.setState(Object(u.a)({},n,o))}},a.validate=function(e,t){return"$lte"===e&&a.state.$gte?-1===a.state.$gte.localeCompare(t):"$gte"!==e||!a.state.$lte||-1===t.localeCompare(a.state.$lte)},a.updateTop5=function(e){a.props.loadTop5("channels",e),a.props.loadTop5("users",e),a.props.loadTop5("tags",e),a.props.loadTop5("regions",e)},a.render=function(){return r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.a.createElement(w.a.Input,{label:"FROM:",name:"$gte",type:"date",style:{marginLeft:"1rem"},onChange:a.handleChange,max:ve()(Date.now(),"x").format("YYYY-MM-DD")}),r.a.createElement("div",{style:{marginLeft:"3rem"}},r.a.createElement(w.a.Input,{label:"TO:",name:"$lte",type:"date",style:{marginLeft:"1rem"},onChange:a.handleChange,max:ve()(Date.now(),"x").format("YYYY-MM-DD")})))},a}return Object(b.a)(t,e),t}(n.Component),we=Object(l.b)(null,{loadTop5:U})(je),Se=a(517),Te=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){a.props.loadTop5(a.props.name,{})},a.createList=function(e){return r.a.createElement(Se.a,{style:{textAlign:"center"},basic:"very",celled:!0,collapsing:!0},r.a.createElement(Se.a.Header,null,r.a.createElement(Se.a.Row,null,r.a.createElement(Se.a.HeaderCell,null,a.props.name.toUpperCase()),r.a.createElement(Se.a.HeaderCell,null,a.units(a.props.name).toUpperCase()))),r.a.createElement(Se.a.Body,null,e.map((function(e){return r.a.createElement(Se.a.Row,{key:"channels"===a.props.name?e.name:e._id},r.a.createElement(Se.a.Cell,null,"channels"===a.props.name?e.name:e._id),r.a.createElement(Se.a.Cell,null,"tags"===a.props.name?e.channels.length:e.count))}))))},a}return Object(b.a)(t,e),Object(O.a)(t,[{key:"units",value:function(e){switch(e){case"channels":case"users":return"Posts";case"regions":return"Users";case"tags":return"Channels";default:return""}}},{key:"render",value:function(){return this.props[this.props.name]?r.a.createElement(ae.a,null,r.a.createElement(ne.a,{as:"h2",floated:"left"},"Top ",this.props.name),r.a.createElement("br",null),this.createList(this.props[this.props.name])):r.a.createElement(z.a,{active:!0,inverted:!0},r.a.createElement(B.a,{content:"Loading"}))}}]),t}(r.a.Component),Ie=Object(l.b)((function(e,t){var a=e.top5,n=t.name;return Object(u.a)({},n,a[n])}),{loadTop5:U})(Te),_e=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,null),r.a.createElement(ae.a.Group,{horizontal:!0},r.a.createElement(Ie,{name:"users"}),r.a.createElement(Ie,{name:"channels"})),r.a.createElement(ae.a.Group,{horizontal:!0},r.a.createElement(Ie,{name:"regions"}),r.a.createElement(Ie,{name:"tags"})))},a}return Object(b.a)(t,e),t}(r.a.Component),ke=a(518),xe=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={},a.componentDidMount=Object(I.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.loadInvites(a.props.user.username);case 2:case"end":return e.stop()}}),e)}))),a}return Object(b.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.invites.length?this.props.invites.map((function(t){return r.a.createElement(ke.a,{key:t._id},r.a.createElement(ke.a.Content,null,r.a.createElement(ke.a.Header,null,t.channel_name),r.a.createElement(ke.a.Description,null,r.a.createElement("strong",null,t.sent_by)," invited you to this channel.")),r.a.createElement(ke.a.Content,{extra:!0},r.a.createElement("div",{className:"ui two buttons"},r.a.createElement(y.a,{onClick:Object(I.a)(T.a.mark((function a(){return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.props.respondToInvite({_id:t._id});case 2:return a.next=4,e.props.loadInvites(e.props.user.username);case 4:case"end":return a.stop()}}),a)}))),basic:!0,color:"green"},"Accept"),r.a.createElement(y.a,{onClick:Object(I.a)(T.a.mark((function a(){return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.props.respondToInvite({_id:t._id},!1);case 2:return a.next=4,e.props.loadInvites(e.props.user.username);case 4:case"end":return a.stop()}}),a)}))),basic:!0,color:"red"},"Reject"))))})):"No Invites")}}]),t}(r.a.Component),Ae=Object(l.b)((function(e){return{user:e.user,invites:e.invites}}),{respondToInvite:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(Object(I.a)(T.a.mark((function a(){return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=5;break}return a.next=3,L.put("/invitations",e);case 3:a.next=7;break;case 5:return a.next=7,L.delete("/invitations",{params:e});case 7:return a.abrupt("return",null);case 8:case"end":return a.stop()}}),a)}))))},loadInvites:function(e){return function(){var t=Object(I.a)(T.a.mark((function t(a){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.get("/invitations",{params:{username:e}});case 2:n=t.sent.data,a({type:"LOAD_USER_INVITES",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(xe),Le=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).selectTab=function(){switch(a.props.tab){case"TOP5":return r.a.createElement(_e,null);case"INVITES":return r.a.createElement(Ae,null);default:return r.a.createElement(ye,null)}},a.render=function(){return r.a.createElement(ae.a,{style:{position:"relative",height:"80%"}},a.selectTab())},a}return Object(b.a)(t,e),t}(r.a.Component),Ne=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={},a.componentDidMount=function(){setTimeout((function(){JSON.parse(sessionStorage.getItem("user"))||D.push("/login")}),800)},a.render=function(){return a.props.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{username:a.props.user.username}),r.a.createElement(te,null),r.a.createElement(Le,{tab:a.props.activeTab})):r.a.createElement(z.a,{active:!0,inverted:!0},r.a.createElement(B.a,{content:"Loading"}))},a}return Object(b.a)(t,e),t}(r.a.Component),Ue=Object(l.b)((function(e){return{activeTab:e.activeTab,user:e.user}}))(Ne),Pe=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/",component:j}),r.a.createElement(E.a,{exact:!0,path:"/login",component:H}),r.a.createElement(E.a,{exact:!0,path:"/register",component:M}),r.a.createElement(E.a,{exact:!0,path:"/user",component:Ue}))},a}return Object(b.a)(t,e),t}(r.a.Component),De=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement("div",{style:{padding:"2%",position:"absolute",width:"100vw",height:"100vh"}},r.a.createElement(E.b,{history:D},r.a.createElement(Pe,null)))},a}return Object(b.a)(t,e),t}(r.a.Component),Re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,He=Object(s.e)(d,Re(Object(s.a)(i.a)));c.a.render(r.a.createElement(l.a,{store:He},r.a.createElement(De,null)),document.getElementById("root"))}},[[291,1,2]]]);
//# sourceMappingURL=main.1a6b4a0e.chunk.js.map